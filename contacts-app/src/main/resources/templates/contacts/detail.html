<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <title>Contact Details</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body class="page-root">

<div class="app-header">
    <div class="app-header-inner">
        <div class="app-title">
            Contacts <span>Manager</span>
        </div>
        <div class="app-header-actions">
            <span>Contacts CRUD · Spring Boot</span>

            <a th:href="@{/users}" class="btn btn-secondary"
               sec:authorize="hasRole('ADMIN')"
               style="margin-left: 0.75rem;">
                Manage users
            </a>

            <span sec:authorize="isAuthenticated()" style="margin-left: 0.5rem;">
                · Logged in as <strong sec:authentication="name"></strong>
            </span>

            <form th:action="@{/logout}" method="post" style="display:inline;">
                <input type="hidden"
                       th:name="${_csrf.parameterName}"
                       th:value="${_csrf.token}"/>

                <button type="submit" class="btn btn-ghost">
                    Logout
                </button>
            </form>

        </div>

    </div>
</div>

<main class="app-main">
    <div class="card">

        <div class="card-header">
            <div>
                <h1 class="card-title">Contact details</h1>
                <div class="card-subtitle">
                    Overview of all information for this contact.
                </div>
            </div>
            <div class="btn-row">
                <a th:href="@{/contacts}" class="btn btn-ghost">← Back to list</a>
                <a th:href="@{/contacts/{id}/edit(id=${contact.id})}"
                   class="btn btn-secondary"
                   sec:authorize="hasRole('ADMIN')">
                    Edit
                </a>
            </div>
        </div>

        <div th:if="${contact != null}">
            <section class="form-section">
                <h2 class="form-section-title">Basic information</h2>
                <div class="detail-grid">

                    <div class="detail-item">
                        <div class="detail-label">ID</div>
                        <div class="detail-value" th:text="${contact.id}">1</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Title</div>
                        <div class="detail-value" th:text="${contact.title}">Mr</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">First name</div>
                        <div class="detail-value" th:text="${contact.firstName}">John</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Last name</div>
                        <div class="detail-value" th:text="${contact.lastName}">Doe</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Gender</div>
                        <div class="detail-value badge badge-soft" th:text="${contact.gender}">male</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Group</div>
                        <div class="detail-value" th:text="${contact.persGroup}">Group</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Function</div>
                        <div class="detail-value" th:text="${contact.function}">Professor</div>
                    </div>

                </div>
            </section>

            <section class="form-section">
                <h2 class="form-section-title">Contact details</h2>
                <div class="detail-grid">

                    <div class="detail-item">
                        <div class="detail-label">Email</div>
                        <div class="detail-value">
                            <a th:href="|mailto:${contact.email}|"
                               th:text="${contact.email}"
                               class="badge badge-soft">
                                john@example.com
                            </a>
                        </div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Phone 1</div>
                        <div class="detail-value" th:text="${contact.phone1}">+49...</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Phone 2</div>
                        <div class="detail-value" th:text="${contact.phone2}">+49...</div>
                    </div>

                    <div class="detail-item detail-item-full">
                        <div class="detail-label">Post address</div>
                        <div class="detail-value" th:text="${contact.postAddress}">Address</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Country</div>
                        <div class="detail-value">
                            <span class="badge badge-neutral"
                                  th:text="${contact.country}">Germany</span>
                        </div>
                    </div>

                </div>
            </section>

            <section class="form-section">
                <h2 class="form-section-title">Institution & academic</h2>
                <div class="detail-grid">

                    <div class="detail-item detail-item-full">
                        <div class="detail-label">Institution</div>
                        <div class="detail-value" th:text="${contact.institution}">Uni</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Faculty</div>
                        <div class="detail-value" th:text="${contact.faculty}">Faculty</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Study domain</div>
                        <div class="detail-value" th:text="${contact.studyDomain}">CS</div>
                    </div>

                </div>
            </section>

            <section class="form-section">
                <h2 class="form-section-title">Additional details</h2>
                <div class="detail-grid">

                    <div class="detail-item">
                        <div class="detail-label">Interest</div>
                        <div class="detail-value" th:text="${contact.interest}">Interest</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Fund use</div>
                        <div class="detail-value" th:text="${contact.fundUse}">fund?</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Past event</div>
                        <div class="detail-value" th:text="${contact.pastEvent}">event</div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Contacted by INGENIUM</div>
                        <div class="detail-value">
                            <span th:if="${contact.contactedByIngenium}" class="badge badge-yes">Yes</span>
                            <span th:if="${!contact.contactedByIngenium}" class="badge badge-no">No</span>
                        </div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">COIL experience</div>
                        <div class="detail-value">
                            <span th:if="${contact.coilExp}" class="badge badge-yes">Yes</span>
                            <span th:if="${!contact.coilExp}" class="badge badge-no">No</span>
                        </div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Mobility funding</div>
                        <div class="detail-value">
                            <span th:if="${contact.mobilityFin}" class="badge badge-yes">Yes</span>
                            <span th:if="${!contact.mobilityFin}" class="badge badge-no">No</span>
                        </div>
                    </div>

                    <div class="detail-item detail-item-full">
                        <div class="detail-label">Comments</div>
                        <div class="detail-value" th:text="${contact.comments}">comments...</div>
                    </div>

                </div>
            </section>

            <section class="form-section">
                <h2 class="form-section-title">Audit</h2>
                <div class="detail-grid">

                    <div class="detail-item">
                        <div class="detail-label">Created at</div>
                        <div class="detail-value"
                             th:text="${contact.createdAt != null ? #temporals.format(contact.createdAt, 'yyyy-MM-dd HH:mm') : ''}">
                            2025-01-01 10:00
                        </div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-label">Created by</div>
                        <div class="detail-value" th:text="${contact.createdBy}">user</div>
                    </div>

                    <div class="detail-item"
                         th:if="${contact.updatedAt != null and contact.updatedAt != contact.createdAt}">
                        <div class="detail-label">Updated at</div>
                        <div class="detail-value"
                             th:text="${#temporals.format(contact.updatedAt, 'yyyy-MM-dd HH:mm')}">
                            2025-01-02 11:00
                        </div>
                    </div>

                    <div class="detail-item"
                         th:if="${contact.updatedAt != null and contact.updatedAt != contact.createdAt}">
                        <div class="detail-label">Updated by</div>
                        <div class="detail-value" th:text="${contact.updatedBy}">user</div>
                    </div>

                </div>
            </section>
        </div>

        <div th:if="${contact == null}" class="text-muted" style="padding: 1rem;">
            Contact not found.
        </div>

    </div>
</main>

</body>
</html>
